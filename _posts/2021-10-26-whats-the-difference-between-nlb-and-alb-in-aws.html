---
layout: post
title: What's the difference between NLB and ALB in AWS?
date: 2021-10-26 08:07:08.000000000 -04:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- AWS
tags: []
meta:
  _edit_last: '1'
  ocean_gallery_link_images: 'off'
  ocean_sidebar: '0'
  ocean_second_sidebar: '0'
  ocean_disable_margins: enable
  ocean_display_top_bar: default
  ocean_display_header: default
  ocean_center_header_left_menu: '0'
  ocean_custom_header_template: '0'
  ocean_header_custom_menu: '0'
  ocean_menu_typo_font_family: '0'
  ocean_disable_title: default
  ocean_disable_heading: default
  ocean_disable_breadcrumbs: default
  ocean_display_footer_widgets: default
  ocean_display_footer_bottom: default
  ocean_custom_footer_template: '0'
  ocean_link_format_target: self
  ocean_quote_format_link: post
  _yoast_wpseo_estimated-reading-time-minutes: '4'
  _yoast_wpseo_primary_category: '27'
  _yoast_wpseo_content_score: '30'
  _thumbnail_id: '889'
  _wtpsw_views: '168'
  _aioseo_title: ''
  _aioseo_description: ''
  _aioseo_keywords: ''
  _aioseo_og_title: ''
  _aioseo_og_description: ''
  _aioseo_og_article_section: ''
  _aioseo_og_article_tags: ''
  _aioseo_twitter_title: ''
  _aioseo_twitter_description: ''
  rank_math_primary_category: '27'
  rank_math_news_sitemap_robots: index
  rank_math_robots: a:1:{i:0;s:5:"index";}
  rank_math_og_content_image: a:2:{s:5:"check";s:32:"228ba3c5cd3dd9c617a5a0e1d247ea1c";s:6:"images";a:1:{i:0;i:878;}}
  rank_math_internal_links_processed: '1'
  _yoast_wpseo_wordproof_timestamp: ''
permalink: "/2021/10/26/whats-the-difference-between-nlb-and-alb-in-aws/"
---
<p><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"><br />
<!-- wp:paragraph {"fontSize":"large"} --><html><body></p>
<p class="has-large-font-size"><span style="text-decoration: underline" class="underline"><span style="background-color:#ff6900" class="tadv-background-color">NLB (Network Load Balancer) </span></span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size"><br>Network Load Balancers (NLBs) function at layers 3 and 4 of the OSI model, while ALBs (Application Load Balancers) operate at layer 7.<br></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size">When a request reaches an NLB, it makes routing decisions based on source and destination IP addresses and port numbers. NLBs lack access to packet content, preventing inspection of data within the packet.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size">Upon an HTTP request from a client, using TCP as the transport protocol, a TCP connection is established after the three-way handshake between the client and NLB. Subsequent HTTP requests and responses occur between the client and server.<br><br>NLBs utilize the established TCP connection from the client to connect to upstream servers, employing NAT to modify both source and destination IP addresses to align with the NLB and upstream servers.<br><br>NLBs are generally faster because, unlike ALBs, they do not inspect data before making routing decisions. They focus on NAT and forward/route packets to upstream servers based on source and destination IP addresses in the data packet.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size"><br><img class="wp-image-878" style="width: 700px;" src="{{site.baseurl}}/assets/2021/10/aws-1.png" alt=""><br><br><img class="wp-image-880" style="width: 800px;" src="{{site.baseurl}}/assets/2021/10/aws-2.png" alt=""></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size">In the provided example, all L4 TCP requests arriving at NLB (on port 80 or 8080) are directed to a target group (<strong>madhu-tcp</strong>), subsequently forwarding requests to an instance on port 80.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:tadv/classic-paragraph --></p>
<p>                                                                                                                                                                         .</p>
<p><!-- /wp:tadv/classic-paragraph --></p>
<p><!-- wp:paragraph --></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"large"} --></p>
<p class="has-large-font-size"><span style="text-decoration: underline" class="underline"><span style="background-color:#ff6900" class="tadv-background-color">ALB (Application Load Balancer)</span></span></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>                                                                                                                                                                                             .</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size">In contrast, ALBs make routing decisions based on the actual packet content, operating at layer 7 of the OSI model. Layer 7 load balancers base their decisions on HTTP headers and message contents, including data type (e.g., text, video) or details from cookies or query strings in the URL.<br><br>ALBs establish two separate TCP connections. The first between the client and ALB is terminated by the ALB, followed by a new TCP connection from the ALB to the upstream server.<br><br>In our example, our ALB comprises three listeners:</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size">The <strong>first listener</strong> (HTTP request on port 80) defaults to forwarding to a target group (<strong>madhu-http</strong>).<br>The <strong>second </strong>and <strong>third listeners</strong> (HTTP requests on ports 8080 and 8081) also default to forwarding to the target group (<strong>madhu-http</strong>).<br><br><img class="wp-image-882" style="width: 700px;" src="{{site.baseurl}}/assets/2021/10/aws-3.png" alt=""><br><br><strong>NOTE:</strong> The target group (<strong>madhu-http</strong>) merely forwards requests from the ALB to a target instance on port 80.<br><br><br><mark style="background-color:rgba(0, 0, 0, 0)" class="has-inline-color has-luminous-vivid-orange-color"><strong>Let's examine the distinctions between ALB and NLB</strong>. </mark><br>In the second listener, two rules are configured. The first rule directs the ALB to forward requests to the target group (<strong>madhu-http2</strong>) if the URL contains a query string with the key "<strong>name</strong>" and key value "<strong>ramu8080</strong>". Otherwise, using the second rule, it forwards all requests to the target group (<strong>madhu-http</strong>).<br><br><img class="wp-image-884" style="width: 700px;" src="{{site.baseurl}}/assets/2021/10/aws-5.png" alt=""></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size"><br><br>The target group (<strong>madhu-http2</strong>) forwards ALB requests to an instance on port  8080.<br><br><img class="wp-image-886" style="width: 700px;" src="{{site.baseurl}}/assets/2021/10/aws-7.png" alt=""></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size"><br><br>The target group (<strong>madhu-http</strong>) forwards ALB requests to an instance on port 80.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph {"fontSize":"medium"} --></p>
<p class="has-medium-font-size"><img class="wp-image-887" style="width: 700px;" src="{{site.baseurl}}/assets/2021/10/aws-8.png" alt=""><br><br><br><br><br></p>
<p><!-- /wp:paragraph --><br />
</body></html></p>
